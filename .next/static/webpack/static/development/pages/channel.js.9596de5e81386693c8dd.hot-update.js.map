{"version":3,"file":"static/webpack/static/development/pages/channel.js.9596de5e81386693c8dd.hot-update.js","sources":["webpack:///./pages/_error.js","webpack:///./pages/channel.js"],"sourcesContent":["import React from 'react'\n\nexport default class Error extends React.Component {\n  static getInitialProps({ res, err }) {\n    const statusCode = res ? res.statusCode : err ? err.statusCode : null;\n    return { statusCode }\n  }\n\n  render() {\n    return (\n      <p>\n        {this.props.statusCode\n          ? `An error ${this.props.statusCode} occurred on server`\n          : 'An error occurred on client'}\n      </p>\n    )\n  }\n}","import React, { Fragment} from 'react';\nimport 'isomorphic-fetch';\nimport Error from './_error';\nimport Layout from '../components/Layout';\nimport ChannelGrid from '../components/ChannelGrid';\nimport PodcastList from '../components/PodcastList';\n\nclass Channel extends React.Component{\n    \n    static async getInitialProps({ query, res }){\n        const idChannel = query.id\n\n        try{\n            let [reqChannel, reqSeries, reqAudios] = await Promise.all([\n                fetch(`https://api.audioboom.com/channels/${ idChannel }`),\n                fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\n                fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\n            ])\n\n            if(reqChannel.status >= 404){\n                res.statusCode = reqChannel.status;\n                return { \n                    channel: null, \n                    audioClips: null, \n                    series: null,\n                    statusCode: reqChannel.status\n                }\n            }\n            \n            const dataChannel = await reqChannel.json();\n            const channel = dataChannel.body.channel;\n    \n            const dataSeries = await reqSeries.json();\n            const series = dataSeries.body.channels\n            \n    \n            const dataAudios =  await reqAudios.json();\n            const audioClips = dataAudios.body.audio_clips;\n            \n            return {channel, audioClips, series, statusCode: 200 };\n        } catch(e){\n            return { \n                channel: null, \n                audioClips: null, \n                series: null,\n                statusCode: 503\n            }\n        }\n    }\n    \n    render(){\n        const { \n            channel, \n            audioClips,\n            series,\n            statusCode\n        } = this.props;\n        //console.log(channel, audioClips);\n\n        if(statusCode !== 200){\n            return(\n                <Error statusCode={statusCode} />\n            )\n        }\n\n        return(\n            <Layout nav={{title:'home', href:\"/\"}} title={ channel.title }>\n                \n                <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n                <h1>{ channel.title }</h1>\n                {\n                    series.length > 0 &&\n                    <Fragment>\n                        <h2>Series</h2>\n                        <ChannelGrid  channels={ series } />\n                    </Fragment>\n                }\n                <PodcastList  audioClips={ audioClips } />\n\n\n                <style jsx>{`\n                .banner {\n                width: 100%;\n                padding-bottom: 25%;\n                background-position: 50% 50%;\n                background-size: cover;\n                background-color: #aaa;\n                }\n                h1 {\n                font-weight: 600;\n                padding: 15px;\n                }\n            `}</style>\n            </Layout>\n        )\n    }\n}\n\nexport default Channel;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;AAbA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;;;;AAJA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AA2CA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AAAA;AAAA;AA6BA;;;;;;;;;;;;;AAtFA;AACA;;;AAGA;AACA;;;;AADA;AAAA;AAAA;AACA;AAKA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;;;AAOA;AACA;;AADA;AACA;;AAEA;AACA;;AADA;AACA;;AAGA;AACA;;AADA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;;;;;;;;;;;;;;;;;;AAnCA;AACA;AA0FA;;;;A","sourceRoot":""}